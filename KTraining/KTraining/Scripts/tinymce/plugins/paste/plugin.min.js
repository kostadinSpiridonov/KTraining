(function(n,t){"use strict";function u(n,t){for(var u,e=[],i=0;i<n.length;++i){if(u=r[n[i]]||f(n[i]),!u)throw"module definition dependecy not found: "+n[i];e.push(u)}t.apply(null,e)}function i(n,i,f){if(typeof n!="string")throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(f===t)throw"invalid module definition, definition function must be specified";u(i,function(){r[n]=f.apply(null,arguments)})}function f(t){for(var r=n,u=t.split(/[.\/]/),i=0;i<u.length;++i){if(!r[u[i]])return;r=r[u[i]]}return r}function e(i){for(var f,o=0;o<i.length;o++){var e=n,s=i[o],u=s.split(/[.\/]/);for(f=0;f<u.length-1;++f)e[u[f]]===t&&(e[u[f]]={}),e=e[u[f]];e[u[u.length-1]]=r[s]}}var r={};i("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(n,t,i){function r(t,i){return n.each(i,function(n){t=n.constructor==RegExp?t.replace(n,""):t.replace(n[0],n[1])}),t}function u(r){function e(n){var t=n.name,i=n;if(t==="br"){u+="\n";return}if(s[t]&&(u+=" "),h[t]){u+=" ";return}if(n.type==3&&(u+=n.value),!n.shortEnded&&(n=n.firstChild))do e(n);while(n=n.next);c[t]&&i.next&&(u+="\n",t=="p"&&(u+="\n"))}var f=new i,o=new t({},f),u="",s=f.getShortEndedElements(),h=n.makeMap("script noscript style textarea video audio iframe object"," "),c=f.getBlockElements();return e(o.parse(r)),u}return{filter:r,innerText:u}}),i("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/util/VK","tinymce/pasteplugin/Utils"],function(n,t,i){return function(r){function o(n){var t,u=r.dom,i;t=r.fire("BeforePastePreProcess",{content:n}),t=r.fire("PastePreProcess",t),n=t.content,t.isDefaultPrevented()||(r.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()&&(i=u.add(r.getBody(),"div",{style:"display:none"},n),t=r.fire("PastePostProcess",{node:i}),u.remove(i),n=t.node.innerHTML),t.isDefaultPrevented()||r.insertContent(n))}function l(n){n=r.dom.encode(n).replace(/\r\n/g,"\n");var f=r.dom.getParent(r.selection.getStart(),r.dom.isBlock),u=r.settings.forced_root_block,t;u&&(t=r.dom.createHTML(u,r.settings.forced_root_block_attrs),t=t.substr(0,t.length-3)+">"),f&&/^(PRE|DIV)$/.test(f.nodeName)||!u?n=i.filter(n,[[/\n/g,"<br>"]]):(n=i.filter(n,[[/\n\n/g,"<\/p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]]),n.indexOf("<p>")!=-1&&(n=t+n)),o(n)}function v(){var i=r.dom,o=r.getBody(),a=r.dom.getViewPort(r.getWin()),c=a.y,s=20,h,l,t;f=r.selection.getRng(),r.inline&&(h=r.selection.getScrollContainer(),h&&(c=h.scrollTop)),f.getClientRects&&(l=f.getClientRects(),l.length?s=c+(l[0].top-i.getPos(o).y):(s=c,t=f.startContainer,t&&(t.nodeType==3&&t.parentNode!=o&&(t=t.parentNode),t.nodeType==1&&(s=i.getPos(t,h||o).y)))),u=i.add(r.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"1",style:"position: absolute; top: "+s+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},e),(n.ie||n.gecko)&&i.setStyle(u,"left",i.getStyle(o,"direction",!0)=="rtl"?65535:-65535),i.bind(u,"beforedeactivate focusin focusout",function(n){n.stopPropagation()}),u.focus(),r.selection.select(u,!0)}function h(){if(u){for(var n;n=r.dom.get("mcepastebin");)r.dom.remove(n),r.dom.unbind(n);f&&r.selection.setRng(f)}s=!1,u=f=null}function y(){for(var n=e,u,t=r.dom.select("div[id=mcepastebin]"),i=t.length;i--;)u=t[i].innerHTML,n==e&&(n=""),u.length>n.length&&(n=u);return n}function p(n){var r={},t,i,u;if(n&&n.types)for(t=n.getData("Text"),t&&t.length>0&&(r["text/plain"]=t),i=0;i<n.types.length;i++)u=n.types[i],r[u]=n.getData(u);return r}function w(n){return p(n.clipboardData||r.getDoc().dataTransfer)}function b(n,t){function f(n){if(i[u].type=="image/png"){var t=new FileReader;return t.onload=function(){o('<img src="'+t.result+'">')},t.readAsDataURL(n.getAsFile()),!0}}var i,u;if(r.settings.paste_data_images&&!("text/html"in t)&&!("text/plain"in t)&&n.clipboardData&&(i=n.clipboardData.items,i))for(u=0;u<i.length;u++)if(f(i[u]))return!0}function k(n){var t=r.getDoc(),i,u;return t.caretPositionFromPoint?(u=t.caretPositionFromPoint(n.clientX,n.clientY),i=t.createRange(),i.setStart(u.offsetNode,u.offset),i.collapse(!0)):t.caretRangeFromPoint&&(i=t.caretRangeFromPoint(n.clientX,n.clientY)),i}function d(){r.on("keydown",function(i){if(!i.isDefaultPrevented()&&(t.metaKeyPressed(i)&&i.keyCode==86||i.shiftKey&&i.keyCode==45)){if(s=i.shiftKey&&i.keyCode==86,i.stopImmediatePropagation(),a=(new Date).getTime(),n.ie&&s){i.preventDefault(),r.fire("paste",{ieFake:!0});return}h(),v()}});r.on("paste",function(t){var f=w(t),p=(new Date).getTime()-a<1e3,k=c.pasteFormat=="text"||s;if(t.isDefaultPrevented()){h();return}if(b(t,f)){h();return}p||t.preventDefault(),n.ie&&(!p||t.ieFake)&&(v(),r.dom.bind(u,"paste",function(n){n.stopPropagation()}),r.getDoc().execCommand("Paste",!1,null),f["text/html"]=y()),setTimeout(function(){var n=y();if(u&&u.firstChild&&u.firstChild.id==="mcepastebin"&&(k=!0),h(),(n==e||!p)&&(n=f["text/html"]||f["text/plain"]||e,n==e)){p||r.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}k?l(f["text/plain"]||i.innerText(n)):o(n)},0)});r.on("dragstart",function(n){if(n.dataTransfer.types)try{n.dataTransfer.setData("mce-internal",r.selection.getContent())}catch(t){}});r.on("drop",function(n){var u=k(n),t,i;u&&!n.isDefaultPrevented()&&(t=p(n.dataTransfer),i=t["mce-internal"]||t["text/html"]||t["text/plain"],i&&(n.preventDefault(),r.undoManager.transact(function(){t["mce-internal"]&&r.execCommand("Delete"),r.selection.setRng(u),t["text/html"]?o(i):l(i)})))})}var c=this,u,f,a=0,e="%MCEPASTEBIN%",s;c.pasteHtml=o,c.pasteText=l;r.on("preInit",function(){d(),r.parser.addNodeFilter("img",function(t){var i,u;if(!r.settings.paste_data_images)for(i=t.length;i--;)u=t[i].attributes.map.src,u&&u.indexOf("data:image")===0&&(t[i].attr("data-mce-object")||u===n.transparentSrc||t[i].remove())})});r.on("PreProcess",function(){r.dom.remove(r.dom.get("mcepastebin"))})}}),i("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(n,t,i,r,u,f){function e(n){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(n)}function o(o){var s=o.settings;o.on("BeforePastePreProcess",function(h){function b(n){function c(n,i,r,o){var h=n._listLevel||e,s;h!=e&&(h<e?t&&(t=t.parent.parent):(f=t,t=null)),t&&t.name==r?t.append(n):(f=f||t,t=new u(r,1),o>1&&t.attr("start",""+o),n.wrap(t)),n.name="li",i.value="",s=i.next,s&&s.type==3&&(s.value=s.value.replace(/^\u00a0+/,"")),h>e&&f&&f.lastChild.append(t),e=h}for(var t,f,e=1,l=n.getAll("p"),r,i,s,h,o=0;o<l.length;o++)if(n=l[o],n.name=="p"&&n.firstChild){for(r="",i=n.firstChild;i;){if(r=i.value,r)break;i=i.firstChild}if(/^\s*[\u2022\u00b7\u00a7\u00d8\u25CF]\s*$/.test(r)){c(n,i,"ul");continue}if(/^\s*\w+\.$/.test(r)){s=/([0-9])\./.exec(r),h=1,s&&(h=parseInt(s[1],10)),c(n,i,"ol",h);continue}t=null}}function k(t,i){var u,r;return(t.name==="p"&&(u=/mso-list:\w+ \w+([0-9]+)/.exec(i),u&&(t._listLevel=parseInt(u[1],10))),o.getParam("paste_retain_style_properties","none")&&(r="",n.each(o.dom.parseStyle(i),function(n,t){switch(t){case"horiz-align":t="text-align";return;case"vert-align":t="vertical-align";return;case"font-color":case"mso-foreground":t="color";return;case"mso-background":case"mso-highlight":t="background"}(c=="all"||y&&y[t])&&(r+=t+":"+n+";")}),r))?r:null}var v=h.content,c,y,l,p,a,w;(c=s.paste_retain_style_properties,c&&(y=n.makeMap(c)),s.paste_enable_default_filters!==!1)&&e(h.content)&&(h.wordContent=!0,v=f.filter(v,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(n,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]),l=s.paste_word_valid_elements,l||(l="@[style],-strong/b,-em/i,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-table[width],-tr,-td[colspan|rowspan|width],-th,-thead,-tfoot,-tbody,-a[href|name],sub,sup,strike,br"),p=new i({valid_elements:l}),a=new t({},p),a.addAttributeFilter("style",function(n){for(var i=n.length,t;i--;)t=n[i],t.attr("style",k(t,t.attr("style"))),t.name!="span"||t.attributes.length||t.unwrap()}),a.addNodeFilter("a",function(n){for(var u=n.length,i,t,r;u--;)i=n[u],t=i.attr("href"),r=i.attr("name"),t&&t.indexOf("file://")===0&&(t=t.split("#")[1],t&&(t="#"+t)),t||r?i.attr({href:t,name:r}):i.unwrap()}),w=a.parse(v),b(w),h.content=new r({},p).serialize(w))})}return o.isWordContent=e,o}),i("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(n,t,i,r){return function(u){function f(n){u.on("BeforePastePreProcess",function(t){t.content=n(t.content)})}function e(n){return r.filter(n,[/^[\s\S]*<!--StartFragment-->|<!--EndFragment-->[\s\S]*$/g,[/<span class="Apple-converted-space">\u00a0<\/span>/g," "],/<br>$/])}function o(n){var f,e;return i.isWordContent(n)?(f=[],t.each(u.schema.getBlockElements(),function(n,t){f.push(t)}),e=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+f.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),n=r.filter(n,[[e,"$1"]]),r.filter(n,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])):n}function s(n){return(u.settings.paste_remove_styles||u.settings.paste_remove_styles_if_webkit!==!1)&&(n=n.replace(/ style=\"[^\"]+\"/g,"")),n}n.webkit&&(f(s),f(e)),n.ie&&f(o)}}),i("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(n,t,i,r){var u;n.add("paste",function(n){function s(){e.pasteFormat=="text"?(this.active(!1),e.pasteFormat="html"):(e.pasteFormat="text",this.active(!0),u||(n.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),u=!0))}var f=this,e,o=n.settings;if(f.clipboard=e=new t(n),f.quirks=new r(n),f.wordFilter=new i(n),n.settings.paste_as_text&&(f.clipboard.pasteFormat="text"),o.paste_preprocess)n.on("PastePreProcess",function(n){o.paste_preprocess.call(f,f,n)});if(o.paste_postprocess)n.on("PastePostProcess",function(n){o.paste_postprocess.call(f,f,n)});if(n.addCommand("mceInsertClipboardContent",function(n,t){t.content&&f.clipboard.pasteHtml(t.content),t.text&&f.clipboard.pasteText(t.text)}),n.paste_block_drop)n.on("dragend dragover draggesture dragdrop drop drag",function(n){n.preventDefault(),n.stopPropagation()});if(!n.settings.paste_data_images)n.on("drop",function(n){var t=n.dataTransfer;t&&t.files&&t.files.length>0&&n.preventDefault()});n.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:s,active:f.clipboard.pasteFormat=="text"}),n.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:e.pasteFormat,onclick:s})})}),e(["tinymce/pasteplugin/Utils","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks","tinymce/pasteplugin/Plugin"])})(this);
//@ sourceMappingURL=plugin.min.js.map